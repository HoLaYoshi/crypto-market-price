"use strict";function assignHtmlValue(t,e){e.forEach(function(e){var n="thb"===selectedCurrency?parseFloat(e.last_price):parseFloat(e.last_price_usd),a=n%1!=0?n.toFixed(2):n,c=e.name?".price."+t+"-"+e.name.toLowerCase():null;a&&"NaN"!==a&&c&&$(c).text()!=a&&$(c).fadeOut(function(){$(this).text(a)}).fadeIn();var o=parseFloat(e.change).toFixed(2),r=e.name?".change."+t+"-"+e.name.toLowerCase():null;o&&"NaN"!==o&&r&&$(r).text()!=o&&$(r).fadeOut(function(){$(this).removeClass("plus"),$(this).removeClass("minus"),o<0?$(this).addClass("minus"):$(this).addClass("plus"),$(this).text(o)}).fadeIn()},this)}function gtag(){dataLayer.push(arguments)}var socket=io(),selectedCurrency="thb",exchangesNames=["bx","bfx","cb","btx","bin","cex","cmc","gdax"],exchangesFullNames={bx:"BX",bfx:"Bitfinex",cb:"Coinbase",btx:"Bittrex",bin:"Binance",cex:"Cex.io",cmc:"Coinmarketcap",gdax:"GDAX"},collection={};exchangesNames.reduce(function(t,e){var n={name:null,last_price:null,last_price_usd:null,currency:null,change:null,volume:null};return t[e]={BTC:JSON.parse(JSON.stringify(n)),ETH:JSON.parse(JSON.stringify(n)),OMG:JSON.parse(JSON.stringify(n)),XRP:JSON.parse(JSON.stringify(n)),BCH:JSON.parse(JSON.stringify(n)),EVX:JSON.parse(JSON.stringify(n)),DAS:JSON.parse(JSON.stringify(n)),LTC:JSON.parse(JSON.stringify(n)),XZC:JSON.parse(JSON.stringify(n))},t},collection),socket.on("online",function(t){$("span.users").html(t)}),socket.on("bx",function(t){assignHtmlValue("bx",t),t.forEach(function(t){Object.assign(collection.bx[t.name],t)})}),socket.on("bfx",function(t){assignHtmlValue("bfx",t),t.forEach(function(t){Object.assign(collection.bfx[t.name],t)})}),socket.on("coinbase",function(t){t.forEach(function(t){Object.assign(collection.cb[t.name],t)})}),socket.on("cex",function(t){assignHtmlValue("cex",t),t.forEach(function(t){Object.assign(collection.cex[t.name],t)})}),socket.on("bittrex",function(t){assignHtmlValue("btx",t),t.forEach(function(t){Object.assign(collection.btx[t.name],t)})}),socket.on("binance",function(t){assignHtmlValue("bin",t),t.forEach(function(t){Object.assign(collection.bin[t.name],t)})}),socket.on("coinmarketcap",function(t){assignHtmlValue("cmc",t),t.forEach(function(t){Object.assign(collection.cmc[t.name],t)})}),socket.on("gdax",function(t){t.forEach(function(t){Object.assign(collection.gdax[t.name],t)})}),window.configMsg={hello:"สวัสดีทุกท่านครับ",donate:"ท่านสามารถให้กำลังใจผู้พัฒนาได้หลายช่องทาง คลิกปุ่ม Donate ด่านล่างได้เลยครับ"},socket.on("notification",function(t){toastr.options.timeOut=1e4,toastr.options.extendedTimeOut=5e3,t.indexOf(atob("PHNjcmlwdA=="))>-1&&(toastr.options.timeOut=1,toastr.options.extendedTimeOut=1),toastr.info(t)}),socket.on("topDonator",function(t){toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-center",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"10000",extendedTimeOut:"5000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.success(t,"TOP DONATOR")}),window.boardcast=function(t){socket.emit("boardcast",t)};var forceSwitchCurrency=function(t){var e=["btc","eth","bch","omg","xrp","evx","das","ltc","xzc"];exchangesNames.forEach(function(n){e.forEach(function(e){var a=null;"thb"===t?a=parseFloat(collection[n][e.toUpperCase()].last_price):"usd"===t&&(a=parseFloat(collection[n][e.toUpperCase()].last_price_usd));var c=a%1!=0?a.toFixed(2):a;"NaN"===c&&(c="-"),$("span.price."+n+"-"+e).html(c)})})};$(".btn-currency").click(function(){$(this).hasClass("active")?($(this).find(".currency-label").html("THB"),forceSwitchCurrency(selectedCurrency="thb")):($(this).find(".currency-label").html("USD"),forceSwitchCurrency(selectedCurrency="usd"))}),$(".navbar-nav > li > a").on("click",function(){$(".navbar-collapse").collapse("hide")}),$("#donate-btn").click(function(t){selectNavbarMenu(t.target.id),showPage("donation-board");new Clipboard(".btn-copy",{text:function(t){return atob(t.getAttribute("data-addr"))}})}),$("#price-compare-btn").click(function(t){selectNavbarMenu(t.target.id),showPage("ticker-board")}),$("#arbitrage-compare-btn").click(function(t){selectNavbarMenu(t.target.id),showPage("arbitrage-board")}),$("#calculator-btn").click(function(t){selectNavbarMenu(t.target.id),showPage("calculator-board")}),$("#contact-btn").click(function(t){selectNavbarMenu(t.target.id),showPage("contact-board")}),$(document).ready(function(){var t=["btc","eth","bch","ltc"],e=exchangesNames.filter(function(t){return"cmc"!==t});t.forEach(function(t){var n=[];e.forEach(function(a){var c="";e.filter(function(t){return t!==a}).map(function(e,n){return 0!==n?"\n              <tr>\n                <td>"+exchangesFullNames[e]+'</td>\n                <td class="'+t+"-"+a+"-"+e+' text-center">-</td>\n              </tr>\n            ':'\n              <tr>\n                <td rowspan="6" class="text-center align-middle">'+exchangesFullNames[a]+"</td>\n                <td>"+exchangesFullNames[e]+'</td>\n                <td class="'+t+"-"+a+"-"+e+' text-center">-</td>\n              </tr>\n            '}).forEach(function(t){c+=t}),n.push('\n        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 mt-4">\n          <table class="table table-bordered table-hover">\n            <thead>\n              <tr>\n                <th class="text-center">Source</th>\n                <th class="text-center">Destination</th>\n                <th class="text-center">Profit (%)</th>\n              </tr>\n            </thead>\n            <tbody>\n              '+c+"\n            </tbody>\n          </table>\n        </div>\n      ")}),(n=_.reverse(n)).forEach(function(e){return $("#arbitrage-board ."+t+"-title").after(e)}),n=[]})});var selectedCoin=void 0,buyPrice=0,amount=1,abtCalc=function(){if(buyPrice&&selectedCoin){var t=function(t,e){return((e-t)/t*100).toFixed(2)},e=function(t){return amount&&NaN!==amount?(buyPrice*(parseFloat(t)/100)*amount).toFixed(2):"Please fill amount"},n=[];_.each(collection,function(t,e){"cb"!==e&&"cmc"!==e&&n.push({exchange:e,last_price:t[selectedCoin].last_price})});for(var a=[],c=(n=_.sortBy(n,["last_price"])).length-1;c>-1&&(n[c].last_price&&a.push(n[c]),3!==a.length);c--);clearStyle();var o=a[0]?exchangesFullNames[a[0].exchange]:"-";$("#1st-exchanges").html(o);var r=a[0]?t(buyPrice,a[0].last_price):"Profit (%)",s=a[0]?e(t(buyPrice,a[0].last_price)):"-";$("#1st-percent").val(r+" %"),s<0?$("#1st-profit").addClass("form-minus"):s>0&&$("#1st-profit").addClass("form-plus"),s=numberWithCommas(s),$("#1st-profit").val(s);var i=a[1]?exchangesFullNames[a[1].exchange]:"-";$("#2nd-exchanges").html(i);var l=a[1]?t(buyPrice,a[1].last_price):"Profit (%)",u=a[1]?e(t(buyPrice,a[1].last_price)):"-";$("#2nd-percent").val(l+" %"),u<0?$("#2nd-profit").addClass("form-minus"):u>0&&$("#2nd-profit").addClass("form-plus"),u=numberWithCommas(u),$("#2nd-profit").val(u);var d=a[2]?exchangesFullNames[a[2].exchange]:"-";$("#3rd-exchanges").html(d);var f=a[2]?t(buyPrice,a[2].last_price):"Profit (%)",m=a[2]?e(t(buyPrice,a[2].last_price)):"-";$("#3rd-percent").val(f+" %"),m<0?$("#3rd-profit").addClass("form-minus"):m>0&&$("#3rd-profit").addClass("form-plus"),m=numberWithCommas(m),$("#3rd-profit").val(m)}},clearStyle=function(){$("#1st-profit").removeClass("form-minus"),$("#2nd-profit").removeClass("form-minus"),$("#3rd-profit").removeClass("form-minus"),$("#1st-profit").removeClass("form-plus"),$("#2nd-profit").removeClass("form-plus"),$("#3rd-profit").removeClass("form-plus")},clearState=function(){$("#abt-input").val(null),$("#abt-amount-input").val(null),$("#abt-unit").val("-"),$("#1st-exchanges").html("Exchanges name"),$("#1st-percent").val(null),$("#1st-profit").val(null),$("#2nd-exchanges").html("Exchanges name"),$("#2nd-percent").val(null),$("#2nd-profit").val(null),$("#3rd-exchanges").html("Exchanges name"),$("#3rd-percent").val(null),$("#3rd-profit").val(null)};$("#abt-input").on("keyup change",function(t){NaN!==parseFloat(t.target.value)&&(buyPrice=parseFloat(t.target.value),abtCalc())}),$("#abt-amount-input").on("keyup change",function(t){NaN!==parseFloat(t.target.value)&&(amount=parseFloat(t.target.value),abtCalc())}),$("#abt-select-coins").on("change",function(t){selectedCoin=t.target.value,$("#abt-unit").html(selectedCoin),clearState(),clearStyle()}),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-111347586-1");var selectNavbarMenu=function(t){$(".navbar .nav-item").removeClass("active"),$("#"+t).parent().addClass("active")},showPage=function(t){["ticker-board","arbitrage-board","calculator-board","donation-board","contact-board"].forEach(function(e){e!==t?$("#"+e).hide():$("#"+e).show()})},numberWithCommas=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};